#set par(leading: 0.55em, justify: true)
#set text(lang: "bg", font: "New Computer Modern", hyphenate: false, size: 14pt)
#show raw: set text(font: "New Computer Modern Mono")
#show math.equation: set text(style: "italic")
#show par: set block(spacing: 0.55em)
#show heading: set block(above: 1.4em, below: 1em)

#let атан2 = math.op(math.upright("атан2"))
#let корен = math.sqrt
#let пи = math.pi
#let син = math.op(math.upright("син"))
#let кос = math.op(math.upright("кос"))
#let частно = math.frac

#set heading(numbering: (..nums) => {
	let heading_funcs = (
		(num) => str(num) + ".",
		(num) => "абвгдежзийклмнопрстуфхцчшщъьюя".clusters().at(num - 1),
	)
	nums
		.pos()
		.enumerate()
		.map(((depth, num)) => heading_funcs.at(calc.rem-euclid(depth, heading_funcs.len()))(num))
		.join()
})

#let todo(content) = text(red, [НАПРАВИ #content])

#page[#grid(rows: (1fr, 1fr, 1fr, 1fr, 1fr),
	[
		#set align(center + top)
		#set par(justify: false)
		#smallcaps[Технологично училище „Електронни системи“ към Технически университет - София]
	],

	[
		#set align(center + horizon)
		#set text(24pt)
		#smallcaps[Дипломна работа]

		#set text(11pt)
		по професия код 481020  „Системен програмист“ \
		специалност код 4810201 „Системно програмиране“
	],

	align(center + horizon)[Тема: Мехатронен паяк],

	align(bottom)[#grid(
		columns: (1fr, 1fr),
		align(left)[Дипломант: \ #text(11pt)[Теодор Цветалинов Тотев]],
		align(right)[Дипломен ръководител: \ #text(11pt)[Станислав Николов]],
	)],

	align(center + bottom)[#smallcaps[София \ 2024]],
)]

#page[#todo[Задание]]

// #page[Отзив на научния ръководител и предложение за рецензент]
#page[]

#heading(numbering: none)[Увод]
#todo[Кратко въведение в областта ( максимум 1 -2 стр.). В края на увода да бъдат поставени целите и задачите на ДР;]

= Проучване
#todo[Представлява проучвателната част на ДР. Прави се преглед на съществуващи хардуерни разработки, на използваната елементна база, основни принципи и методи за обработка на сигнали и информация ( максимум 8-10 страници) ;]
#todo[esp32]
#todo[servo]

= Изисквания
#todo[Да съдържа функционалните и електрическите изисквания към проектираното устройство (точка 2.1.), блокова схема на устройството, описание на предназначението и функциите на отделните блокове ( максимум 6-8 страници );]
#todo[брой крака]
#todo[ААА срещу гейската литиево-ьонна батерия]
#todo[Комуникация]

= Електроника
#todo[Същинската част на ДР с най - голям обем.  Да включва описание на принципните електрически  схеми на отделните блокове или на цялото устройство, информация за използваната елементна база, изчислителна записка, симулации на цялото устройство или на отделни блокове, графики, характеристики, анализи ( максимум 10-15 страници );]

= Механика
#todo[Да съдържа описание на особеностите при проектирането на печатните платки с конструктивна  CAD система, графичните оригинали на страна елементи и страна спойки, вътрешни и захранващи слоеве на печатните платки, ситопечат, спецификация на елементите и използваните корпуси ( максимум 5-8 страници) ;]
#todo[кад]

= Логика
#todo[Да съдържа описание на алгоритъма и сорс кода на управляващия софтуер със съответна коментарна част и обяснения ( максимум 5-10 страници). ]

== Обратна кинематика
#todo[какво е обратна кинематика]
Подвижните части на всеки един крак са два кокъла $к_1$ и $к_2$ и три серво мотора $с_0$, $с_1$ и $с_2$.
Задачата е имайки желани кординати $ъ$, $ю$ и $в$ и дължините на костите,
да разберем стойностите на трите серво мотора които ще закарат стъпалото в тези кординати.

#todo[чертеж]
$
с_0 &= атан2(ъ, ю) &upright("по определение") \
р   &= корен(ъ^2 + ю^2) &upright("по питагоровата теорема") \
$

#todo[чертеж]

$
&к = корен(р^2 + в^2) &upright("по питагоровата теорема") \
$

$
&к^2 = к_1^2 + к_2^2 - 2к_1к_2кос(с_2 - пи) &upright("по косинусовата теорема") \
&с_2 = пи + кос^(-1)частно(к^2 - к_1^2 - к_2^2, -2к_1к_2) \
$

$
&theta = атан2(в, р)
$

$
&angle.spheric к_1к_2 = с_1 - theta \
&к_2^2 = к^2 + к_2^2 - 2к к_2кос(с_1 - theta) &upright("по косинусовата теорема") \
&с_1 = theta + кос^(-1)частно(к_2^2 - к^2 - к_1^2, -2к к_1) \
$

#todo[свържи уравненията]

== Походка
#todo[разсъждения върху един следващ крак]

= Изпълнение
#todo[Да съдържа описание и особеностите при създаването на работоспособен модел на проектираното устройство, както и фигури със снимки на външния вид на макета или монтираната печатна платка ( максимум 5-6 страници). Може и да липсва, ако няма разработен макет на устройството;]

#heading(numbering: none)[Заключение]
#todo[включва обобщение на постиженията в дипломната работа и виждане за усъвършенстване и обогатяване на разработката – 1 страница;]

#heading(numbering: none)[Литература]
#todo[]

#bilbliography("")

= Приложения
#todo[]

#outline(title: [Съдържание])
